# MongoDB 的基本架構

MongoDB 是一個 NoSQL 資料庫，與傳統的關聯式資料庫（如 MySQL）不同，它基於文檔模型來存儲和處理數據。
以下是 MongoDB 的基本架構介紹：

## 文檔（Document）
- MongoDB 的數據存儲單位是文檔（類似 JSON 的 BSON 格式）。
- 每個文檔都是一個鍵值對集合，這意味著數據由一組鍵值（Key-Value）組成。
- 文檔具有靈活的結構，相同集合中的不同文檔不必遵循相同的字段或結構。
- **範例**：
  ```json
  {
    "name": "freda",
    "age": 66,
    "address": {
      "street": "Qingshui District",
      "city": "Taichung"
    }
  }
## 集合（Collection）
- 文檔被組織成集合（相當於 MySQL 的表）。集合中的文檔可以結構不同，並且沒有固定的模式（Schema-less），這意味著不需要像 MySQL 那樣提前定義數據表的結構。

## 資料庫（Database）
- MongoDB 中的資料庫是存儲集合的容器。一個 MongoDB 伺服器可以包含多個資料庫。

## 索引（Indexes）
- MongoDB 支持索引來提高查詢性能。索引可以在文檔的某些字段上創建，以便更快地查詢這些字段。

## 副本集（Replica Set）
- MongoDB 支持副本集，以實現高可用性。副本集是一組 MongoDB 節點，主節點處理寫操作，從節點用來備份並作為高可用性節點。
  
## 分片（Sharding）
- MongoDB 支持分片技術，可以將數據水平分割到多個節點上，以提高處理大數據的性能。這種方式可以讓數據庫具備高擴展性。

## 聚合框架（Aggregation Framework）
- MongoDB 提供了一個功能強大的聚合框架，用來執行數據聚合操作（類似 SQL 的 GROUP BY）。它可以處理多步驟的數據計算、篩選和轉換。
---
## MongoDB 在安裝完成後，會自帶三個預設的資料庫，分別是：
- admin
- local
- config

### admin 資料庫
- 用途：
  - admin 資料庫是 MongoDB 的管理資料庫。當你對 MongoDB 進行管理操作時（例如建立或管理用戶、設置權限、管理伺服器配置等），這些操作都是在 admin 資料庫中完成的。
- 特點：
  - 如果用戶在 admin 資料庫中被賦予了 root 角色，那麼這個用戶將對整個 MongoDB 伺服器擁有完全的控制權限。
  - 包含了管理員級別的權限設置，適用於所有資料庫的操作，例如建立新資料庫、管理使用者和權限控制等。
  - 使用者驗證、身份認證等通常也會在這個資料庫中處理。
### local 資料庫
- 用途：
  - local 資料庫儲存的是 MongoDB 節點的本地資料。這些資料不會被複製到其他節點，因此在複製集或分片架構中，每個節點的 local 資料庫都是獨立的。
- 特點：
  - local 資料庫主要用於 MongoDB 內部操作，例如：複製集（replication）相關的操作數據（如操作日誌 oplog）。
  - 不會被備份或複製到其他節點。
  - 當 MongoDB 配置為複製集時，local 資料庫內的 oplog.rs 集合會用來記錄操作日誌，用於複製集的同步。
### config 資料庫
- 用途：
  - config 資料庫是 MongoDB 分片架構中使用的資料庫。當 MongoDB 啟用了分片模式，這個資料庫就會儲存所有分片的配置信息，包括分片的集合、路由信息、分片的元數據等。
- 特點：
  - config 資料庫包含了 MongoDB 分片的元數據信息，例如哪個分片包含了哪些資料，路由信息等。
  - 如果沒有啟用分片架構，這個資料庫會保持空白。
